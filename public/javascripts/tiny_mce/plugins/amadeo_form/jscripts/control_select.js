direction=1;sortType='';function addOption(){var table=document.getElementById('options_table');var num=table.rows.length;var tr=table.insertRow(num);var td0=tr.insertCell(0);var td1=tr.insertCell(1);var td2=tr.insertCell(2);var td3=tr.insertCell(3);td0.innerHTML='<input type="radio" name="rd_default" value="'+num+'" id="rd_default_'+num+'"/>';td1.innerHTML='<input type="text" id="ed_option_value_'+num+'" name="ed_option_value_'+num+'" class="medium_input" onkeyup="validateName(this)"/>'
td2.innerHTML='<input type="text" id="ed_option_text_'+num+'" name="ed_option_text_'+num+'" class="medium_input"/>';td3.innerHTML='<input type="text" id="ed_option_pr_'+num+'" name="ed_option_pr_'+num+'" value="'+num*2+'" class="small_input" onkeyup="validateNumber(this)"/>';}function sortText(){if(sortType=='text'){direction=-direction;}else{direction=1;}sortType='text';doSort(cmpText);}function sortPriority(){if(sortType=='priority'){direction=-direction;}else{direction=1;}sortType='priority';doSort(cmpPriority);}function sortValue(){if(sortType=='value'){direction=-direction;}else{direction=1;}sortType='value';doSort(cmpValue);}function doSort(sortProc){var table=document.getElementById('options_table');var num=table.rows.length;var values=Array();for(var i=1;i<num;i++){values[i-1]=Array(document.getElementById('ed_option_value_'+i).value,document.getElementById('ed_option_text_'+i).value,document.getElementById('ed_option_pr_'+i).value);}values.sort(sortProc);for(var i=1;i<num;i++){document.getElementById('ed_option_value_'+i).value=values[i-1][0];document.getElementById('ed_option_text_'+i).value=values[i-1][1];document.getElementById('ed_option_pr_'+i).value=values[i-1][2];}}function cmpText(v1,v2){if(v1[1]>v2[1]){return direction;}if(v1[1]<v2[1]){return direction*-1;}return 0;}function cmpValue(v1,v2){if(v1[0]>v2[0]){return direction;}if(v1[0]<v2[0]){return direction*-1;}return 0;}function cmpPriority(v1,v2){return direction*(parseFloat(v1[2])-parseFloat(v2[2]));}function initSelect(){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var focusElm=inst.getFocusElement();var nodeName=focusElm.nodeName.toLowerCase();if(nodeName=="select"){editing=focusElm;selectOption('cb_class',focusElm.className);document.getElementById('ed_name').value=focusElm.name.replace(/^cb_/,'');document.getElementById('ed_desc').value=focusElm.title;var table=document.getElementById('options_table');var len=table.rows.length;for(var i=0;i<editing.childNodes.length;i++){document.getElementById('ed_option_value_'+(i+1)).value=editing.childNodes[i].value;document.getElementById('ed_option_text_'+(i+1)).value=encodeAttribute(editing.childNodes[i].innerHTML);document.getElementById('ed_option_pr_'+(i+1)).value=(i+1)*2;if(editing.childNodes[i].selected){document.getElementById('rd_default_'+(i+1)).checked=true;}addOption();}}else{editing=null;}}function insertSelect(){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var className=getSelectValue('cb_class');var cName=document.getElementById('ed_name').value;var cDesc=document.getElementById('ed_desc').value;if(cName==''){alert(tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_err_name_mandatory')));return false;}else{cName='cb_'+cName;}if(!editing&&inst.contentWindow.document.getElementById(cName)){alert(tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_err_name_unique')));return false;}if(className=='none'){className='';}inst.execCommand('mceBeginUndoLevel');if(editing==null){editing=inst.getDoc().createElement('select');inst.getFocusElement().appendChild(editing);}else{editing.innerHTML='';}editing.id=cName;editing.name=cName;editing.title=cDesc;editing.className=className;var table=document.getElementById('options_table');var oValue,oText,optElm;for(var i=1;i<table.rows.length;i++){oValue=document.getElementById('ed_option_value_'+i).value;oText=document.getElementById('ed_option_text_'+i).value;if((oValue!='')&&(oText!='')){optElm=inst.getDoc().createElement('option');optElm.value=oValue;optElm.innerHTML=oText;if(document.getElementById('rd_default_'+i).checked){optElm.setAttribute('selected','selected');}editing.appendChild(optElm);}}inst.execCommand("mceEndUndoLevel");tinyMCEPopup.close();}