function changeMode(existing){if(existing){document.getElementById('new_name_span').style.display='none'
document.getElementById('old_name_span').style.display='';document.getElementById('default_value_tr').style.display=''}else{document.getElementById('old_name_span').style.display='none';document.getElementById('new_name_span').style.display='';document.getElementById('default_value_tr').style.display='none'}document.getElementById('rd_old').checked=existing;document.getElementById('rd_new').checked=!existing;}function onChangeMode(){changeMode(document.getElementById('rd_old').checked);}function showDefaultValue(radioName){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var radios=tinyMCE.getElementsByAttributeValue(inst.getBody(),"input","type","radio");var currentValue=document.getElementById('ed_value').value;for(var i=0;i<radios.length;i++){if((radios[i].name==radioName)&&radios[i].checked){if(radios[i].value==currentValue){selectOption('cb_default','current');return true;}else{selectOption('cb_default',radios[i].value);return true;}}}selectOption('cb_default','none');}function radioGetValues(){var radioName=getSelectValue('cb_name');var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var radios=tinyMCE.getElementsByAttributeValue(inst.getBody(),"input","type","radio");var currentValue=document.getElementById('ed_value').value;clearSelect('cb_default');addToSelect('cb_default','none',tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_radio_default_none')));addToSelect('cb_default','current',tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_radio_default_this')));for(var i=0;i<radios.length;i++){if((radios[i].name==radioName)&&!(radios[i].value==currentValue)){addToSelect('cb_default',radios[i].value,radios[i].value);}}showDefaultValue(radioName);}function setDefaultRadio(radioName,selectedValue,currentValue){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var radios=tinyMCE.getElementsByAttributeValue(inst.getBody(),"input","type","radio");for(var i=0;i<radios.length;i++){radios[i].setAttribute('checked','');if((radios[i].value==selectedValue)||((radios[i].value==currentValue)&&(selectedValue=='current'))){radios[i].setAttribute('checked','checked');}}}function onChangeName(){radioGetValues();}function initRadio(){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));radios=tinyMCE.getElementsByAttributeValue(inst.getBody(),"input","type","radio");var focusElm=inst.getFocusElement();for(var i=0;i<radios.length;i++){addToSelect('cb_name',radios[i].name,radios[i].name);}if(document.getElementById('cb_name').options.length>0){changeMode(true);if((focusElm.nodeName.toLowerCase()=='input')&&(focusElm.type.toLowerCase()=='radio')){document.getElementById('ed_value').value=focusElm.value;document.getElementById('ed_desc').value=focusElm.title;selectOption('cb_name',focusElm.name);editing=focusElm;}else{editing=null;}radioGetValues();}else{changeMode(false);editing=null;}}function insertRadio(){var inst=tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));var cDesc=document.getElementById('ed_desc').value;var cValue=document.getElementById('ed_value').value;cName=getSelectValue('cb_name');if((cName=='')||document.getElementById('rd_new').checked){var cName=document.getElementById('ed_name').value;if(cName==''){alert(tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_err_name_mandatory')));return false;}else{cName='rd_'+cName;}}if(cValue==''){alert(tinyMCE.entityDecode(tinyMCE.getLang('lang_amadeo_form_err_value_mandatory')));return false;}inst.execCommand('mceBeginUndoLevel');if(editing!=null){editing.name=cName;editing.title=cDesc;editing.type='radio';editing.value=cValue;}else{html='<input';html+=makeAttrib('name',cName);html+=makeAttrib('title',cDesc);html+=makeAttrib('type','radio');html+=makeAttrib('value',cValue);html+='/>';inst.execCommand('mceInsertContent',false,html);}setDefaultRadio(cName,getSelectValue('cb_default'),cValue);inst.execCommand("mceEndUndoLevel");tinyMCEPopup.close();}