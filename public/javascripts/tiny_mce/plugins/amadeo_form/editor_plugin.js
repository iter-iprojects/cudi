tinyMCE.importPluginLanguagePack('amadeo_form');var TinyMCE_amadeo_formPlugin={getInfo:function(){return{longname:'amadeo_form plugin',author:'Your name',authorurl:'http://www.yoursite.com',infourl:'http://www.yoursite.com/docs/amadeo_form.html',version:"1.0"};},initInstance:function(inst){},getControlHTML:function(cn){if(cn=="amadeo_form"){return	tinyMCE.getButtonHTML(cn+'_edit','lang_amadeo_form_edit','{$pluginurl}/images/edit.gif','mceamadeo_f_edit',true)+tinyMCE.getButtonHTML(cn+'_checkbox','lang_amadeo_form_checkbox','{$pluginurl}/images/checkbox.gif','mceamadeo_f_checkbox',true)+tinyMCE.getButtonHTML(cn+'_radio','lang_amadeo_form_radio','{$pluginurl}/images/radio.gif','mceamadeo_f_radio',true)+tinyMCE.getButtonHTML(cn+'_select','lang_amadeo_form_select','{$pluginurl}/images/select.gif','mceamadeo_f_select',true)+tinyMCE.getButtonHTML(cn+'_button','lang_amadeo_form_button','{$pluginurl}/images/button.gif','mceamadeo_f_button',true)+tinyMCE.getButtonHTML(cn+'_fieldset','lang_amadeo_form_fieldset','{$pluginurl}/images/fieldset.gif','mceamadeo_f_fieldset',true)+tinyMCE.getButtonHTML(cn+'_unfieldset','lang_amadeo_form_unfieldset','{$pluginurl}/images/unfieldset.gif','mceamadeo_f_unfieldset',true);}return"";},execCommand:function(editor_id,element,command,user_interface,value){var fileName='';var inst=tinyMCE.getInstanceById(editor_id);switch(command){case"mceamadeo_f_edit":fileName='control_edit.html';break;case"mceamadeo_f_button":fileName='control_button.html';break;case"mceamadeo_f_checkbox":fileName='control_checkbox.html';break;case"mceamadeo_f_modify":var node=inst.getFocusElement();switch(node.nodeName){case'TEXTAREA':fileName='control_edit.html';break;case'INPUT':switch(node.type){case'text':case'file':case'password':fileName='control_edit.html';break;case'submit':case'reset':case'button':fileName='control_button.html';break;case'radio':fileName='control_radio.html';break;case'checkbox':fileName='control_checkbox.html';break;default:return false;}break;case'SELECT':fileName='control_select.html';break;default:return false;}break;case"mceamadeo_f_radio":fileName='control_radio.html';break;case"mceamadeo_f_select":fileName='control_select.html';break;case"mceamadeo_f_fieldset":var selectedText=inst.selection.getSelectedText();var focusElm=inst.getFocusElement();if(tinyMCE.selectedElement&&selectedText&&(selectedText.length>0)){fileName='control_fieldset.html';break;}else{return false;}case"mceamadeo_f_unfieldset":var inst=tinyMCE.getInstanceById(editor_id);var fNode=inst.getFocusElement();var found=false;do{if(fNode.nodeName.toLowerCase()=="fieldset"){found=true;break;}}while(fNode=fNode.parentNode);if(found){html=fNode.innerHTML.replace(/<legend>.*?legend>/i,'');inst.execCommand('mceBeginUndoLevel');if(tinyMCE.isIE){fNode.outerHTML=fNode.innerHTML;}else{var rng=fNode.ownerDocument.createRange();rng.setStartBefore(fNode);rng.setEndAfter(fNode);rng.deleteContents();rng.insertNode(rng.createContextualFragment(html));}}inst.execCommand("mceEndUndoLevel");return true;default:return false;}if(fileName!=''){var amadeo_form=new Array();amadeo_form['file']='../../plugins/amadeo_form/'+fileName;amadeo_form['width']=640;amadeo_form['height']=480;tinyMCE.openWindow(amadeo_form,{editor_id:editor_id,resizable:"yes"});tinyMCE.triggerNodeChange(false);return true;}return false;},handleNodeChange:function(editor_id,node,undo_index,undo_levels,visual_aid,any_selection){tinyMCE.switchClass(editor_id+'_amadeo_form_edit','mceButtonNormal');tinyMCE.switchClass(editor_id+'_amadeo_form_button','mceButtonNormal');tinyMCE.switchClass(editor_id+'_amadeo_form_checkbox','mceButtonNormal');tinyMCE.switchClass(editor_id+'_amadeo_form_radio','mceButtonNormal');tinyMCE.switchClass(editor_id+'_amadeo_form_select','mceButtonNormal');tinyMCE.switchClass(editor_id+'_amadeo_form_fieldset','mceButtonNormal');if(node==null){return;}var inFieldset=false;var fNode=node;do{if(fNode.nodeName.toLowerCase()=="fieldset"){tinyMCE.switchClass(editor_id+'_amadeo_form_fieldset','mceButtonSelected');tinyMCE.switchClass(editor_id+'_amadeo_form_unfieldset','mceButtonSelected');inFieldset=true;break;}}while(fNode=fNode.parentNode);if(!inFieldset){tinyMCE.switchClass(editor_id+'_amadeo_form_unfieldset','mceButtonDisabled');if(any_selection){tinyMCE.switchClass(editor_id+'_amadeo_form_fieldset','mceButtonNormal');}else{tinyMCE.switchClass(editor_id+'_amadeo_form_fieldset','mceButtonDisabled');}}switch(node.nodeName){case'TEXTAREA':tinyMCE.switchClass(editor_id+'_amadeo_form_edit','mceButtonSelected');return true;case'INPUT':switch(node.type){case'text':case'file':case'password':tinyMCE.switchClass(editor_id+'_amadeo_form_edit','mceButtonSelected');return true;case'submit':case'reset':case'button':tinyMCE.switchClass(editor_id+'_amadeo_form_button','mceButtonSelected');return true;case'radio':tinyMCE.switchClass(editor_id+'_amadeo_form_radio','mceButtonSelected');return true;case'checkbox':tinyMCE.switchClass(editor_id+'_amadeo_form_checkbox','mceButtonSelected');return true;default:return false;}case'SELECT':tinyMCE.switchClass(editor_id+'_amadeo_form_select','mceButtonSelected');return true;default:return false;}}};tinyMCE.addPlugin("amadeo_form",TinyMCE_amadeo_formPlugin);